(function(a){function b(b,c){function d(a){return n.ratio>=1||(v.now=Math.min(p[c.axis]-q[c.axis],Math.max(0,v.start+((r?a.pageX:a.pageY)-w.start))),u=v.now*o.ratio,n.obj.css(s,-u),q.obj.css(s,v.now)),!1}function e(b){return a(document).unbind("mousemove",d),a(document).unbind("mouseup",e),q.obj.unbind("mouseup",e),document.ontouchmove=q.obj[0].ontouchend=document.ontouchend=null,!1}function f(b){if(!(n.ratio>=1)){var b=b||window.event,d=b.wheelDelta?b.wheelDelta/120:-b.detail/3;u-=d*c.wheel,u=Math.min(n[c.axis]-m[c.axis],Math.max(0,u)),q.obj.css(s,u/o.ratio),n.obj.css(s,-u),b=a.event.fix(b),b.preventDefault()}}function g(b){w.start=r?b.pageX:b.pageY;var c=parseInt(q.obj.css(s));return v.start=c=="auto"?0:c,a(document).bind("mousemove",d),document.ontouchmove=function(b){a(document).unbind("mousemove"),d(b.touches[0])},a(document).bind("mouseup",e),q.obj.bind("mouseup",e),q.obj[0].ontouchend=document.ontouchend=function(b){a(document).unbind("mouseup"),q.obj.unbind("mouseup"),e(b.touches[0])},!1}function h(){q.obj.bind("mousedown",g),q.obj[0].ontouchstart=function(a){return a.preventDefault(),q.obj.unbind("mousedown"),g(a.touches[0]),!1},p.obj.bind("mouseup",d),c.scroll&&this.addEventListener?(l[0].addEventListener("DOMMouseScroll",f,!1),l[0].addEventListener("mousewheel",f,!1)):c.scroll&&(l[0].onmousewheel=f)}function i(){q.obj.css(s,u/o.ratio),n.obj.css(s,-u),w.start=q.obj.offset()[s];var a=t.toLowerCase();o.obj.css(a,p[c.axis]),p.obj.css(a,p[c.axis]),q.obj.css(a,q[c.axis])}function j(){return k.update(),h(),k}var k=this,l=b,m={obj:a(".viewport",b)},n={obj:a(".overview",b)},o={obj:a(".scrollbar",b)},p={obj:a(".track",o.obj)},q={obj:a(".thumb",o.obj)},r=c.axis=="x",s=r?"left":"top",t=r?"Width":"Height",u,v={start:0,now:0},w={};return this.update=function(a){m[c.axis]=m.obj[0]["offset"+t],n[c.axis]=n.obj[0]["scroll"+t],n.ratio=m[c.axis]/n[c.axis],o.obj.toggleClass("disable",n.ratio>=1),p[c.axis]=c.size=="auto"?m[c.axis]:c.size,q[c.axis]=Math.min(p[c.axis],Math.max(0,c.sizethumb=="auto"?p[c.axis]*n.ratio:c.sizethumb)),o.ratio=c.sizethumb=="auto"?n[c.axis]/p[c.axis]:(n[c.axis]-m[c.axis])/(p[c.axis]-q[c.axis]),u=a=="relative"&&n.ratio<=1?Math.min(n[c.axis]-m[c.axis],Math.max(0,u)):0,u=a=="bottom"&&n.ratio<=1?n[c.axis]-m[c.axis]:isNaN(parseInt(a))?u:parseInt(a),i()},j()}a.tiny=a.tiny||{},a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,size:"auto",sizethumb:"auto"}},a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);return this.each(function(){a(this).data("tsb",new b(a(this),c))}),this},a.fn.tinyscrollbar_update=function(b){return a(this).data("tsb").update(b)}})(jQuery);